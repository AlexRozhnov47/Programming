using System;

namespace ConsoleApp1
{
    class Program
    { static double Rand(double a)
        {
            Random rnd = new Random();
            double value = rnd.NextDouble() * (1 - 0);
            return value;
        }
        static int Rand1(double a)
        {
            Random rnd = new Random();
            int value = rnd.Next(22-1);
            return value;
        }
        static double RandERR(double a)
        {
            Random rnd = new Random();
            double value = rnd.NextDouble() * (1 - 0.7);
            return value;
        }
        static void Main(string[] args)
        { const int N = 44;
            double n = 1;
            double a = Rand(N);
            double a1;
            double a2 = RandERR(N);
            double a3 = n - a2;
            a1 = 1;
            a1 = a1 - a;
            
            //Console.WriteLine("Hello World!");
            //double x1 = Rand();
            //double x2 = Rand();
            //double x3 = Rand();
            //double x4 = Rand();
            //double x5 = Rand();
            //double x1 = Convert.ToDouble(Console.ReadLine());
            //double x2 = Convert.ToDouble(Console.ReadLine());
            //double x3 = Convert.ToDouble(Console.ReadLine());
            //double x4 = Convert.ToDouble(Console.ReadLine());
            //double x5 = Convert.ToDouble(Console.ReadLine());
            double x1 = a;
            double x2 = a1;
            double x3 = a1;
            double x4 = a1;
            double x5 = a1;
            double x6 = a1;
            double x7 = a1;
            double x8 = a1;
            double x9 = a1;
            double x10 = a1;
            double x11 = a1;
            double x12 = a1;
            double x13 = a1;
            double x14 = a1;
            double x15 = a1;
            double x16 = a1;
            double x17 = a1;
            double x18 = a1;
            double x19 = a1;
            double x20 = a1;
            double x21 = a1;
            double x22 = a1;
            double x23 = a1;
            double x24 = a1;
            double x25 = a1;
            double x26 = a1;
            double x27 = a1;
            double x28 = a1;
            double x29 = a1;
            double x30 = a1;
            double x31 = a1;
            double x32 = a1;
            double x33 = a1;
            double x34 = a1;
            double x35 = a1;
            double x36 = a1;
            double x37 = a1;
            double x38 = a1;
            double x39 = a1;
            double x40 = a1;
            double x41 = a1;
            double x42 = a1;
            double x43 = a1;
            double x44 = a1;
            double e1 = (x1 * (Math.Log(x1, 2)));
            double e2 = (x2 * (Math.Log(x2, 2)));
            double e3 = (x3 * (Math.Log(x3, 2)));
            double e4 = (x4 * (Math.Log(x4, 2)));
            double e5 = (x5 * (Math.Log(x5, 2)));
            double e6 = (x6 * (Math.Log(x6, 2)));
            double e7 = (x7 * (Math.Log(x7, 2)));
            double e8 = (x8 * (Math.Log(x8, 2)));
            double e9 = (x9 * (Math.Log(x9, 2)));
            double e10 = (x10 * (Math.Log(x10, 2)));
            double e11 = (x11 * (Math.Log(x11, 2)));
            double e12 = (x12 * (Math.Log(x12, 2)));
            double e13 = (x13 * (Math.Log(x13, 2)));
            double e14 = (x14 * (Math.Log(x14, 2)));
            double e15 = (x15 * (Math.Log(x15, 2)));
            double e16 = (x16 * (Math.Log(x16, 2)));
            double e17 = (x17 * (Math.Log(x17, 2)));
            double e18 = (x18 * (Math.Log(x18, 2)));
            double e19 = (x19 * (Math.Log(x19, 2)));
            double e20 = (x20 * (Math.Log(x20, 2)));
            double e21 = (x21 * (Math.Log(x21, 2)));
            double e22 = (x22 * (Math.Log(x22, 2)));
            double e23 = (x23 * (Math.Log(x23, 2)));
            double e24 = (x24 * (Math.Log(x24, 2)));
            double e25 = (x25 * (Math.Log(x25, 2)));
            double e26 = (x26 * (Math.Log(x26, 2)));
            double e27 = (x27 * (Math.Log(x27, 2)));
            double e28 = (x28 * (Math.Log(x28, 2)));
            double e29 = (x29 * (Math.Log(x29, 2)));
            double e30 = (x30 * (Math.Log(x30, 2)));
            double e31 = (x31 * (Math.Log(x31, 2)));
            double e32 = (x32 * (Math.Log(x32, 2)));
            double e33 = (x33 * (Math.Log(x33, 2)));
            double e34 = (x34 * (Math.Log(x34, 2)));
            double e35 = (x35 * (Math.Log(x35, 2)));
            double e36 = (x36 * (Math.Log(x36, 2)));
            double e37 = (x37 * (Math.Log(x37, 2)));
            double e38 = (x38 * (Math.Log(x38, 2)));
            double e39 = (x39 * (Math.Log(x39, 2)));
            double e40 = (x40 * (Math.Log(x40, 2)));
            double e41 = (x41 * (Math.Log(x41, 2)));
            double e42 = (x42 * (Math.Log(x42, 2)));
            double e43 = (x43 * (Math.Log(x43, 2)));
            double e44 = (x44 * (Math.Log(x44, 2)));
            double e;
            //2 lab
            double y1 = x44 - a;
            double y2 = x43 - a;
            double y3 = x42 - a;
            double y4 = x41 - a;
            double y5 = x40 - a;
            double y6 = x39 - a;
            double y7 = x38 - a;
            double y8 = x37 - a;
            double y9 = x36 - a;
            double y10 = x35 - a;
            double y11 = x34 - a;
            double y12 = x33 - a;
            double y13 = x32 - a;
            double y14 = x31 - a;
            double y15 = x30 - a;
            double y16 = x29 - a;
            double y17 = x28 - a;
            double y18 = x27 - a;
            double y19 = x26 - a;
            double y20 = x25 - a;
            double y21 = x24 - a;
            double y22 = x23 - a;
            double y23 = x22 - a;
            double y24 = x21 - a;
            double y25 = x20 - a;
            double y26 = x19 - a;
            double y27 = x18 - a;
            double y28 = x17 - a;
            double y29 = x16 - a;
            double y30 = x15 - a;
            double y31 = x14 - a;
            double y32 = x13 - a;
            double y33 = x12 - a;
            double y34 = x11 - a;
            double y35 = x10 - a;
            double y36 = x9 - a;
            double y37 = x8 - a;
            double y38 = x7 - a;
            double y39 = x6 - a;
            double y40 = x5 - a;
            double y41 = x4 - a;
            double y42 = x3 - a;
            double y43 = x2 - a;
            double y44 = x1 - a1;
            double py11 = y1 * (x44 - a3);
            double py12 = y2 * (x43 - a3);
            double py13 = y3 * (x42 - a3);
            double py14 = y4 * (x41 - a3);
            double py15 = y5 * (x40 - a3);
            double py16 = y6 * (x39 - a3);
            double py17 = y7 * (x38 - a3);
            double py18 = y8 * (x37 - a3);
            double py19 = y9 * (x36 - a3);
            double py110 = y10 * (x35 - a3);
            double py111 = y11 * (x34 - a2);
            double py112 = y12 * (x33 - a2);
            double py113 = y13 * (x32 - a2);
            double py114 = y14 * (x31 - a2);
            double py115 = y15 * (x30 - a2);
            double py116 = y16 * (x29 - a2);
            double py117 = y17 * (x28 - a2);
            double py118 = y18 * (x27 - a2);
            double py119 = y19 * (x26 - a2);
            double py120 = y20 * (x25 - a2);
            double py121 = y21 * (x24 - a3);
            double py122 = y22 * (x23 - a3);
            double py123 = y23 * (x22 - a3);
            double py124 = y24 * (x21 - a3);
            double py125 = y25 * (x20 - a3);
            double py126 = y26 * (x19 - a3);
            double py127 = y27 * (x18 - a3);
            double py128 = y28 * (x17 - a3);
            double py129 = y29 * (x16 - a3);
            double py130 = y30 * (x15 - a2);
            double py131 = y31 * (x14 - a2);
            double py132 = y32 * (x13 - a2);
            double py133 = y33 * (x12 - a2);
            double py134 = y34 * (x11 - a2);
            double py135 = y35 * (x10 - a2);
            double py136 = y36 * (x9 - a2);
            double py137 = y37 * (x8 - a2);
            double py138 = y38 * (x7 - a2);
            double py139 = y39 * (x6 - a2);
            double py140 = y40 * (x5 - a2);
            double py141 = y41 * (x4 - a3);
            double py142 = y42 * (x3 - a3);
            double py143 = y43 * (x2 - a3);
            double py144 = y44 * (x1 - a3);
            double hy1 = (py11 * (Math.Log(y1, 2)));
            double hy2 = (py12 * (Math.Log(y1, 2)));
            double hy3 = (py13 * (Math.Log(y3, 2)));
            double hy4 = (py14 * (Math.Log(y4, 2)));
            double hy5 = (py15 * (Math.Log(y5, 2)));
            double hy6 = (py16 * (Math.Log(y6, 2)));
            double hy7 = (py17 * (Math.Log(y7, 2)));
            double hy8 = (py18 * (Math.Log(y8, 2)));
            double hy9 = (py19 * (Math.Log(y9, 2)));
            double hy10 = (py110 * (Math.Log(y10, 2)));
            double hy11 = (py111 * (Math.Log(y11, 2)));
            double hy12 = (py112 * (Math.Log(y12, 2)));
            double hy13 = (py113 * (Math.Log(y13, 2)));
            double hy14 = (py114 * (Math.Log(y14, 2)));
            double hy15 = (py115 * (Math.Log(y15, 2)));
            double hy16 = (py116 * (Math.Log(y16, 2)));
            double hy17 = (py117 * (Math.Log(y17, 2)));
            double hy18 = (py118 * (Math.Log(y18, 2)));
            double hy19 = (py119 * (Math.Log(y19, 2)));
            double hy20 = (py120 * (Math.Log(y20, 2)));
            double hy21 = (py121 * (Math.Log(y21, 2)));
            double hy22 = (py122 * (Math.Log(y22, 2)));
            double hy23 = (py123 * (Math.Log(y23, 2)));
            double hy24 = (py124 * (Math.Log(y24, 2)));
            double hy25 = (py125 * (Math.Log(y25, 2)));
            double hy26 = (py126 * (Math.Log(y26, 2)));
            double hy27 = (py127 * (Math.Log(y27, 2)));
            double hy28 = (py128 * (Math.Log(y28, 2)));
            double hy29 = (py129 * (Math.Log(y29, 2)));
            double hy30 = (py130 * (Math.Log(y30, 2)));
            double hy31 = (py131 * (Math.Log(y31, 2)));
            double hy32 = (py132 * (Math.Log(y32, 2)));
            double hy33 = (py133 * (Math.Log(y33, 2)));
            double hy34 = (py134 * (Math.Log(y34, 2)));
            double hy35 = (py135 * (Math.Log(y35, 2)));
            double hy36 = (py136 * (Math.Log(y36, 2)));
            double hy37 = (py137 * (Math.Log(y37, 2)));
            double hy38 = (py138 * (Math.Log(y38, 2)));
            double hy39 = (py139 * (Math.Log(y39, 2)));
            double hy40 = (py140 * (Math.Log(y40, 2)));
            double hy41 = (py141 * (Math.Log(y41, 2)));
            double hy42 = (py142 * (Math.Log(y42, 2)));
            double hy43 = (py143 * (Math.Log(y43, 2)));
            double hy44 = (py144 * (Math.Log(y44, 2)));
            double hy = 0;
            //task 3
            double N1 = 22;
            double q = 1 / (2 * N1);
            int t111 = Rand1(N1);
            int t23 = 1;
            t23 = t111 - t23;
            double t1 = e1 * t111;
            double t2 = e2 * t23;
            double t3 = e3 * t111;
            double t4 = e4 * t23;
            double t5 = e5 * t111;
            double t6 = e6 * t23;
            double t7 = e7 * t111;
            double t8 = e8 * t23;
            double t9 = e9 * t111;
            double t10 = e10 * t23;
            double t11 = e11 * t111;
            double t12 = e12 * t23;
            double t13 = e13 * t111;
            double t14 = e14 * t23;
            double t15 = e15 * t111;
            double t16 = e16 * t23;
            double t17 = e17 * t111;
            double t18 = e18 * t23;
            double t19 = e19 * t111;
            double t20 = e20 * t23;
            double t21 = e21 * t111;
            double t22 = e22 * t23;
            double t = e1 + e2 + e3 + e4 + e5 + e6 + e7 + e8 + e9 + e10 + e11 + e12 + e13 + e14 + e15 + e16 + e17 + e18 + e19 + e20 + e21 + e22;
            double u = 1 / t;
            double c = u * Math.Log(N1, 2);
            double yh = -(hy1 + hy2 + hy3 + hy4 + hy5 + hy6 + hy7 + hy8 + hy9 + hy10 + hy11 + hy12 + hy13 + hy14 + hy15 + hy16 + hy17 + hy18 + hy19 + hy20 + hy21 + hy22);
            double iy = u * yh;

            //double max = -((1 / N)*(Math.Log(1/N, 2)));
            double max1 = Math.Log(N, 2);
            //Console.WriteLine("Предельная истинная энтропия = ", max, "кв.ед на символ");
            //Console.WriteLine("Предельная ложная энтропия = ", max1, "кв.ед на символ");
            if (x1 + x2 + x3 + x4 + x5 <= 1)
            {
                e = -((x1 * (Math.Log(x1, 2))) + (x2 * (Math.Log(x2, 2))) + (x3 * (Math.Log(x3, 2))) + (x4 * (Math.Log(x4, 2))) + (x5 * (Math.Log(x5, 2))));
                Console.WriteLine("Истинное решение");
                Console.WriteLine(e);
            }
            else {
                e = -((x1 * (Math.Log(x1, 2))) + (x2 * (Math.Log(x2, 2))) + (x3 * (Math.Log(x3, 2))) + (x4 * (Math.Log(x4, 2))) + (x5 * (Math.Log(x5, 2))));
                Console.WriteLine("Ошибочное решение");
                Console.WriteLine(e);

            };
            if (x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x9 + x10 + x11 + x12 + x13 + x14 + x15 + x16 + x17 + x18 + x19 + x20 + x21 + x22 + x23 + x24 + x25 + x26 + x27 + x28 + x29 + x30 + x31 + x32 + x33 + x34 + x35 + x36 + x37 + x38 + x39 + x40 + x41 + x42 + x43 + x44 <= 1)
            {
                e = -(e1 + e2 + e3 + e4 + e5 + e6 + e7 + e8 + e9 + e10 + e11 + e12 + e13 + e14 + e15 + e16 + e17 + e18 + e19 + e20 + e21 + e22 + e23 + e24 + e25 + e26 + e27 + e28 + e29 + e30 + e31 + e32 + e33 + e34 + e35 + e36 + e37 + e38 + e39 + e40 + e41 + e42 + e42 + e43);
                Console.WriteLine("Истинное решение");
                Console.WriteLine(e);
            }
            else
            {
                e = -(e1 + e2 + e3 + e4 + e5 + e6 + e7 + e8 + e9 + e10 + e11 + e12 + e13 + e14 + e15 + e16 + e17 + e18 + e19 + e20 + e21 + e22 + e23 + e24 + e25 + e26 + e27 + e28 + e29 + e30 + e31 + e32 + e33 + e34 + e35 + e36 + e37 + e38 + e39 + e40 + e41 + e42 + e42 + e43);
                Console.WriteLine("Ошибочное решение");
                Console.WriteLine(e);

            };
            Console.WriteLine("Предельная энтропия");
            Console.WriteLine(max1);

            hy = -(Math.Pow((hy1 + hy2 + hy3 + hy4 + hy5 + hy6 + hy7 + hy8 + hy9 + hy10 + hy11 + hy12 + hy13 + hy14 + hy15 + hy16 + hy17 + hy18 + hy19 + hy20 + hy21 + hy22 + hy23 + hy24 + hy25 + hy26 + hy27 + hy28 + hy29 + hy30 + hy31 + hy32 + hy33 + hy34 + hy35 + hy36 + hy37 + hy38 + hy39 + hy40 + hy41 + hy42 + hy42 + hy43 + hy44), N));
            Console.WriteLine("Усредненный результат с учетом помехи энтропии");
            Console.WriteLine(hy);

            double iz = u * (iy - hy);
            Console.WriteLine("Эталон помехи в системе");
            Console.WriteLine(q);
            Console.WriteLine("Предполагаемая пропусканая способность канала");
            Console.WriteLine(c);
            Console.WriteLine("Итоговый результат вследствие вляния помехи");
            Console.WriteLine(iz);
        }
            
    } 
}
    
